<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>화담숲 도면 핀 뷰어 - 다수 핀 포함</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; text-align: center; }
    .map-container { position: relative; display: inline-block; }
    .pin {
      position: absolute;
      width: 30px;
      height: 30px;
      background: red;
      border-radius: 50%;
      color: white;
      text-align: center;
      line-height: 30px;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
    }
    .popup {
      display: none;
      position: absolute;
      background: white;
      border: 1px solid #aaa;
      padding: 8px;
      z-index: 100;
      max-width: 400px;
    }
    .popup img { width: 180px; margin: 3px; }
  </style>
  <script>
    async function loadPins() {
      const pins = [
        { x: 335, y: 441, label: "적-1" }, { x: 437, y: 399, label: "적-2" },
        { x: 462, y: 372, label: "적-3" }, { x: 250, y: 100, label: "적-4" },
        { x: 300, y: 100, label: "적-5" }, { x: 350, y: 100, label: "적-6" },
        { x: 400, y: 100, label: "적-7" }, { x: 450, y: 100, label: "적-8" },
        { x: 500, y: 100, label: "적-9" }, { x: 550, y: 100, label: "적-10" },
        { x: 100, y: 200, label: "적-11" }, { x: 150, y: 200, label: "적-12" },
        { x: 200, y: 200, label: "적-13" }, { x: 250, y: 200, label: "적-14" },
        { x: 300, y: 200, label: "적-15" }, { x: 350, y: 200, label: "적-16" },
        { x: 400, y: 200, label: "적-17" }, { x: 450, y: 200, label: "적-18" },
        { x: 500, y: 200, label: "적-19" }, { x: 550, y: 200, label: "적-20" },
        { x: 100, y: 300, label: "적-21" }, { x: 150, y: 300, label: "적-22" },
        { x: 200, y: 300, label: "적-23" }, { x: 250, y: 300, label: "적-24" },
        { x: 300, y: 300, label: "적-25" }, { x: 350, y: 300, label: "적-26" },
        { x: 400, y: 300, label: "적-27" }, { x: 450, y: 300, label: "적-28" },
        { x: 500, y: 300, label: "적-29" }, { x: 550, y: 300, label: "적-30" },
        { x: 100, y: 400, label: "적-31" }, { x: 150, y: 400, label: "적-32" },
        { x: 200, y: 400, label: "적-33" }, { x: 250, y: 400, label: "적-34" },
        { x: 300, y: 400, label: "적-35" },

        { x: 100, y: 500, label: "전-1" }, { x: 150, y: 500, label: "전-2" },
        { x: 200, y: 500, label: "전-3" }, { x: 250, y: 500, label: "전-4" },
        { x: 300, y: 500, label: "전-5" }, { x: 350, y: 500, label: "전-6" },
        { x: 400, y: 500, label: "전-7" }, { x: 450, y: 500, label: "전-8" },
        { x: 500, y: 500, label: "전-9" }, { x: 550, y: 500, label: "전-10" },
        { x: 100, y: 600, label: "전-11" }, { x: 150, y: 600, label: "전-12" },
        { x: 200, y: 600, label: "전-13" }, { x: 250, y: 600, label: "전-14" },
        { x: 300, y: 600, label: "전-15" }, { x: 350, y: 600, label: "전-16" },
        { x: 400, y: 600, label: "전-17" }
      ];

      const container = document.querySelector('.map-container');
      pins.forEach((p, i) => {
        const pin = document.createElement('div');
        pin.className = 'pin';
        pin.style.top = p.y + 'px';
        pin.style.left = p.x + 'px';
        pin.textContent = p.label;
        pin.onclick = () => togglePopup('popup' + i);
        container.appendChild(pin);

        const popup = document.createElement('div');
        popup.className = 'popup';
        popup.id = 'popup' + i;
        popup.style.top = (p.y + 40) + 'px';
        popup.style.left = p.x + 'px';
        for (let j = 1; j <= 2; j++) {
          const img = document.createElement('img');
          img.src = `images/${p.label}_${j}.jpg`;
          popup.appendChild(img);
        }
        popup.innerHTML += `<br>${p.label} 구역`;
        container.appendChild(popup);
      });
    }

    function togglePopup(id) {
      document.querySelectorAll('.popup').forEach(p => p.style.display = 'none');
      const el = document.getElementById(id);
      if (el) el.style.display = 'block';
    }

    document.addEventListener('click', e => {
      if (!e.target.classList.contains('pin')) {
        document.querySelectorAll('.popup').forEach(p => p.style.display = 'none');
      }
    });

    window.onload = loadPins;
  </script>
</head>
<body>
  <h2>화담숲 도면 기반 핀 이미지 뷰어</h2>
  <div class="map-container">
    <img src="layout_sample.jpg" width="1000px" alt="도면" />
  </div>
  <p><a href="editable_index.html" target="_blank">👉 핀 수정하러 가기</a></p>
</body>
</html>
