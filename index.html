<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>í™”ë‹´ìˆ² ë„ë©´ í•€ ë·°ì–´ - íŒì—… ë‹«ê¸° ë²„íŠ¼ & ì‚¬ì§„ í™•ëŒ€ ëª¨ë‹¬</title>
<style>
  body { font-family: sans-serif; background: #f4f4f4; text-align: center; }
  .map-container { position: relative; display: inline-block; }
  .pin {
    position: absolute;
    width: 40px;
    height: 40px;
    background: red;
    border-radius: 50%;
    color: white;
    text-align: center;
    line-height: 40px;
    font-weight: bold;
    font-size: 18px;
    cursor: pointer;
    user-select: none;
  }
  .popup {
    display: none;
    position: absolute;
    background: white;
    border: 1px solid #aaa;
    padding: 8px 8px 12px 8px;
    z-index: 100;
    max-width: 400px;
    box-shadow: 0 0 8px rgba(0,0,0,0.3);
    border-radius: 6px;
  }
  .popup .close-btn {
    position: absolute;
    top: 4px;
    right: 6px;
    font-weight: bold;
    font-size: 20px;
    color: #555;
    cursor: pointer;
    user-select: none;
  }
  .popup img {
    width: 180px;
    margin: 3px;
    cursor: pointer;
    border-radius: 4px;
    transition: transform 0.2s ease;
  }
  .popup img:hover {
    transform: scale(1.05);
  }
  /* ì „ì²´ í™”ë©´ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
  .modal {
    display: none;
    position: fixed;
    z-index: 1500;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background-color: rgba(0,0,0,0.8);
    overflow: hidden;
  }
  .modal-content {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100vw; height: 100vh;
    object-fit: contain;
    margin: auto;
    max-width: none;
    max-height: none;
    box-shadow: none;
    cursor: zoom-out;
    user-select: none;
  }
  .modal-close-btn {
    position: fixed;
    top: 20px;
    right: 30px;
    font-size: 36px;
    color: white;
    cursor: pointer;
    z-index: 1600;
    user-select: none;
  }
</style>
</head>
<body>
<h2>í™”ë‹´ìˆ² ë„ë©´ ê¸°ë°˜ í•€ ì´ë¯¸ì§€ ë·°ì–´</h2>
<div class="map-container">
  <img src="layout_sample.jpg" width="1000px" alt="ë„ë©´" />
</div>
<p><a href="editable_index.html" target="_blank">ğŸ‘‰ í•€ ìˆ˜ì •í•˜ëŸ¬ ê°€ê¸°</a></p>

<!-- ëª¨ë‹¬ HTML -->
<div id="imgModal" class="modal" tabindex="0">
  <span class="modal-close-btn" id="modalCloseBtn">&times;</span>
  <img class="modal-content" id="modalImage" alt="í™•ëŒ€ ì´ë¯¸ì§€" />
</div>

<script>
  // ëª¨ë‹¬ ì—´ê¸°
  function openModal(src) {
    const modal = document.getElementById('imgModal');
    const modalImg = document.getElementById('modalImage');
    modal.style.display = "block";
    modalImg.src = src;
  }

  // ëª¨ë‹¬ ë‹«ê¸°
  const modal = document.getElementById('imgModal');
  const modalCloseBtn = document.getElementById('modalCloseBtn');
  modalCloseBtn.onclick = () => {
    modal.style.display = "none";
  };
  modal.onclick = (e) => {
    if(e.target === modal) { // ëª¨ë‹¬ ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
      modal.style.display = "none";
    }
  };

  // íŒì—… ë‹«ê¸° í•¨ìˆ˜
  function closePopup(popupId) {
    const popup = document.getElementById(popupId);
    if(popup) popup.style.display = 'none';
  }

  async function loadPins() {
    const pins = [
      { x: 100, y: 100, label: "ì -1" }, { x: 150, y: 100, label: "ì -2" },
      { x: 200, y: 100, label: "ì -3" }, { x: 250, y: 100, label: "ì -4" },
      { x: 300, y: 100, label: "ì -5" }, { x: 350, y: 100, label: "ì -6" },
      { x: 400, y: 100, label: "ì -7" }, { x: 450, y: 100, label: "ì -8" },
      { x: 500, y: 100, label: "ì -9" }, { x: 550, y: 100, label: "ì -10" },
      { x: 100, y: 200, label: "ì -11" }, { x: 150, y: 200, label: "ì -12" },
      { x: 200, y: 200, label: "ì -13" }, { x: 250, y: 200, label: "ì -14" },
      { x: 300, y: 200, label: "ì -15" }, { x: 350, y: 200, label: "ì -16" },
      { x: 400, y: 200, label: "ì -17" }, { x: 450, y: 200, label: "ì -18" },
      { x: 500, y: 200, label: "ì -19" }, { x: 550, y: 200, label: "ì -20" },
      { x: 100, y: 300, label: "ì -21" }, { x: 150, y: 300, label: "ì -22" },
      { x: 200, y: 300, label: "ì -23" }, { x: 250, y: 300, label: "ì -24" },
      { x: 300, y: 300, label: "ì -25" }, { x: 350, y: 300, label: "ì -26" },
      { x: 400, y: 300, label: "ì -27" }, { x: 450, y: 300, label: "ì -28" },
      { x: 500, y: 300, label: "ì -29" }, { x: 550, y: 300, label: "ì -30" },
      { x: 100, y: 400, label: "ì -31" }, { x: 150, y: 400, label: "ì -32" },
      { x: 200, y: 400, label: "ì -33" }, { x: 250, y: 400, label: "ì -34" },
      { x: 300, y: 400, label: "ì -35" },
      { x: 100, y: 500, label: "ì „-1" }, { x: 150, y: 500, label: "ì „-2" },
      { x: 200, y: 500, label: "ì „-3" }, { x: 250, y: 500, label: "ì „-4" },
      { x: 300, y: 500, label: "ì „-5" }, { x: 350, y: 500, label: "ì „-6" },
      { x: 400, y: 500, label: "ì „-7" }, { x: 450, y: 500, label: "ì „-8" },
      { x: 500, y: 500, label: "ì „-9" }, { x: 550, y: 500, label: "ì „-10" },
      { x: 100, y: 600, label: "ì „-11" }, { x: 150, y: 600, label: "ì „-12" },
      { x: 200, y: 600, label: "ì „-13" }, { x: 250, y: 600, label: "ì „-14" },
      { x: 300, y: 600, label: "ì „-15" }, { x: 350, y: 600, label: "ì „-16" },
      { x: 400, y: 600, label: "ì „-17" }
    ];

    const container = document.querySelector('.map-container');
    pins.forEach((p, i) => {
      // í•€ ìƒì„±
      const pin = document.createElement('div');
      pin.className = 'pin';
      pin.style.top = p.y + 'px';
      pin.style.left = p.x + 'px';
      pin.textContent = p.label;
      pin.onclick = () => togglePopup('popup' + i);
      container.appendChild(pin);

      // íŒì—… ìƒì„±
      const popup = document.createElement('div');
      popup.className = 'popup';
      popup.id = 'popup' + i;
      popup.style.top = (p.y + 40) + 'px';
      popup.style.left = p.x + 'px';

      // ë‹«ê¸° ë²„íŠ¼ ìƒì„±
      const closeBtn = document.createElement('span');
      closeBtn.className = 'close-btn';
      closeBtn.innerHTML = '&times;';
      closeBtn.onclick = (e) => {
        e.stopPropagation();
        closePopup(popup.id);
      };
      popup.appendChild(closeBtn);

      // ì´ë¯¸ì§€ 2ì¥ ì¶”ê°€
      for (let j = 1; j <= 2; j++) {
        const img = document.createElement('img');
        img.src = `images/${p.label}_${j}.jpg`;
        img.onclick = (e) => {
          e.stopPropagation();
          openModal(img.src);
        };
        popup.appendChild(img);
      }

      // ë¼ë²¨ í…ìŠ¤íŠ¸
      const labelText = document.createElement('div');
      labelText.textContent = `${p.label} êµ¬ì—­`;
      labelText.style.marginTop = '8px';
      popup.appendChild(labelText);

      container.appendChild(popup);
    });
  }

  // íŒì—… í† ê¸€ í•¨ìˆ˜
  function togglePopup(id) {
    document.querySelectorAll('.popup').forEach(p => p.style.display = 'none');
    const el = document.getElementById(id);
    if (el) el.style.display = 'block';
  }

  // íŒì—… ë‹«ê¸° í•¨ìˆ˜
  function closePopup(id) {
    const el = document.getElementById(id);
    if (el) el.style.display = 'none';
  }

  // íŒì—… ì™¸ ì˜ì—­ í´ë¦­ ì‹œ íŒì—… ë‹«ê¸°
  document.addEventListener('click', e => {
    if (!e.target.classList.contains('pin')) {
      document.querySelectorAll('.popup').forEach(p => p.style.display = 'none');
    }
  });

  window.onload = loadPins;
</script>
</body>
</html>
